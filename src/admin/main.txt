import Button from 'react-bootstrap/Button';
import axios from 'axios'
import { useParams } from 'react-router-dom';
import { useFormik } from 'formik';
import React, {useState,useEffect} from 'react'
import Form from 'react-bootstrap/Form';
import Headertwo from './Header2';
import Footer from './Footer';

function EditRecipe(props) {

const [rep,setRep]=useState([]);
const { id } = useParams();

async function getData() {
    const response = await axios.get(`http://localhost:5000/recipes/${id}`).then((data)=>{
      setRep(data.data);
    });

}

useEffect(()=>{
  getData();
},[])



  const Formik = useFormik({
    initialValues: { 
      rid: `${id}`,
      ingredients: ``,
      description: ``
    },
    onSubmit: function(values){
      values.rid= id;
      axios.post(`http://localhost:5000/editrecipe`,values)
    }
})

  return (
    <>
    <Headertwo />
    {rep.map((item)=>(
      
            <Form style={{ 
              width: '90vw',
              marginLeft: '5vw',
              marginTop:'5vh',
              marginBottom: '5vh'
            }}
            onSubmit={Formik.handleSubmit}
            >
                <Form.Group className="mb-3" controlId="formBasicEmail">
                    <Form.Label><h1>Ingredients</h1></Form.Label> 
                    <div className='bg-info p-2 mb-2'>
                      {item.ingredients}
                    </div>
                    <Form.Control className="form-control" as="textarea" rows={5} name="ingredients" onChange={Formik.handleChange} value={Formik.values.ingredients} placeholder="change ingredients to..." />
                </Form.Group>

                <Form.Group className="mb-3" controlId="formBasicPassword">
                    <Form.Label><h1>Preparation</h1></Form.Label>
                    <div className='bg-info p-2 mb-2'>
                      {item.description}
                    </div>
                    <Form.Control className="form-control" as="textarea" rows={5} name="description" onChange={Formik.handleChange} value={Formik.values.description} placeholder="change preparation steps to..." />
                </Form.Group>

                <Button variant="success" type="submit" onSubmit={Formik.handleSubmit}>
                SAVE CHANGES 
                </Button>
          </Form>
    ))}
      <Footer />
    </>
  )
}

export default EditRecipe